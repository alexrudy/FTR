<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Fourier Transform Reconstructor in libFTR &mdash; FTR v0.2.0</title>
    
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="top" title="FTR v0.2.0" href="../index.html" />
    <link rel="up" title="libFTR: C implementation of FTR" href="index.html" />
    <link rel="next" title="Slope Management for non-periodic domains" href="slopemanagement.html" />
    <link rel="prev" title="libFTR: C implementation of FTR" href="index.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>
<script type="text/javascript" src="../_static/copybutton.js"></script>


  </head>
  <body role="document">
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">FTR</span><span id="logotext2">AO</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="slopemanagement.html" title="Slope Management for non-periodic domains">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="index.html" title="libFTR: C implementation of FTR">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">FTR v0.2.0</a>
	 &raquo;
      </li>
      <li><a href="index.html" accesskey="U">libFTR: C implementation of FTR</a> &raquo;</li>
      
      <li>Fourier Transform Reconstructor in libFTR</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="fourier-transform-reconstructor-in-libftr">
<h1>Fourier Transform Reconstructor in libFTR<a class="headerlink" href="#fourier-transform-reconstructor-in-libftr" title="Permalink to this headline">¶</a></h1>
<div class="section" id="using-the-fourier-transform-reconstructor">
<h2>Using the Fourier Transform Reconstructor<a class="headerlink" href="#using-the-fourier-transform-reconstructor" title="Permalink to this headline">¶</a></h2>
<p>The Fourier Transform Reconstructor uses a plan architecture, similar to what <a class="reference external" href="http://www.fftw.org">fftw</a> uses. The intent is that the user can allocate the necessary memory and describe the operations required by the reconstructor once in a plan object, and then repeately re-use the plan to pefrom the reconstruction many times.</p>
<p>The user is still responsible for allocating the input and output arrays, to give the maximum flexibility inside a reconstruction loop. However, the underliyng fourier transforms performed with <a class="reference external" href="http://www.fftw.org">fftw</a> will be fastest if the arrays are byte-aligned and SIMD compatible. The easiest way to do this is to allocate the input and output arrays with <code class="docutils literal"><span class="pre">fftw_malloc</span></code>.</p>
<p>If you have a pointer to x slopes, a pointer to y slopes, and you want to create a function which does the reconstruction once do:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;ftr.h&gt;</span>
<span class="n">ftr_plan</span> <span class="n">recon</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nx</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">ny</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kt">double</span> <span class="o">*</span> <span class="n">sx</span><span class="p">,</span> <span class="o">*</span> <span class="n">sy</span><span class="p">,</span> <span class="o">*</span> <span class="n">est</span><span class="p">;</span>
<span class="n">est</span> <span class="o">=</span> <span class="n">fftw_malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="o">*</span> <span class="n">nx</span> <span class="o">*</span> <span class="n">ny</span><span class="p">);</span>
<span class="n">sx</span> <span class="o">=</span> <span class="n">fftw_malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="o">*</span> <span class="n">nx</span> <span class="o">*</span> <span class="n">ny</span><span class="p">);</span>
<span class="n">sy</span> <span class="o">=</span> <span class="n">fftw_malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="o">*</span> <span class="n">nx</span> <span class="o">*</span> <span class="n">ny</span><span class="p">);</span>

<span class="c1">// Set up the reconstructor</span>
<span class="n">recon</span> <span class="o">=</span> <span class="n">ftr_plan_reconstructor</span><span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">est</span><span class="p">);</span>

<span class="c1">// Set the filter</span>
<span class="n">ftr_set_filter</span><span class="p">(</span><span class="n">recon</span><span class="p">,</span> <span class="n">gx</span><span class="p">,</span> <span class="n">gy</span><span class="p">);</span>

<span class="c1">// Do the reconstruction as many times as necessary.</span>
<span class="n">ftr_reconstruct</span><span class="p">(</span><span class="n">recon</span><span class="p">);</span>

<span class="c1">// Free allocated memory at the end.</span>
<span class="n">ftr_plan_destroy</span><span class="p">(</span><span class="n">recon</span><span class="p">);</span>
</pre></div>
</div>
<p>At the end of this code snippet, the reconstructed phase is always stored in the <code class="docutils literal"><span class="pre">est</span></code> variable defined above, and the operation is in place. Subsequent reconstructions should replace the contents of <code class="docutils literal"><span class="pre">sx</span></code> and <code class="docutils literal"><span class="pre">sy</span></code> rather than allocating a new reconstructor via intfunc:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan_reconstructor</span></code>.</p>
<p>To change the filter used by a particular inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code>, it is safe to call intfunc:<code class="xref py py-obj docutils literal"><span class="pre">ftr_set_filter</span></code>.</p>
</div>
<div class="section" id="fourier-transform-reconstructor-api">
<h2>Fourier Transform Reconstructor API<a class="headerlink" href="#fourier-transform-reconstructor-api" title="Permalink to this headline">¶</a></h2>
<p>The API relies heavily on the concept of a <a class="reference internal" href="#c.ftr_plan" title="ftr_plan"><code class="xref c c-type docutils literal"><span class="pre">ftr_plan</span></code></a>. The plan is an opaque pointer to an internal structure which manages the geometry and memory involved in performing the filtering and Fourier transforms. Plans are created with <a class="reference internal" href="#c.ftr_plan_reconstructor" title="ftr_plan_reconstructor"><code class="xref c c-func docutils literal"><span class="pre">ftr_plan_reconstructor()</span></code></a>, and destroyed with <a class="reference internal" href="#c.ftr_destroy" title="ftr_destroy"><code class="xref c c-func docutils literal"><span class="pre">ftr_destroy()</span></code></a>.</p>
<dl class="type">
<dt id="c.ftr_plan">
<code class="descname">ftr_plan</code><a class="headerlink" href="#c.ftr_plan" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the core persistance type for reconstruction data. It is a struct which can be treated as an opaque object to the user, which maintains pointers to the re-used variables in the reconstruction process.</p>
</dd></dl>

<div class="section" id="creating-and-destroying-plans">
<h3>Creating and destroying plans<a class="headerlink" href="#creating-and-destroying-plans" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.ftr_plan_reconstructor">
<a class="reference internal" href="#c.ftr_plan" title="ftr_plan">ftr_plan</a> <code class="descname">ftr_plan_reconstructor</code><span class="sig-paren">(</span>int<em>&nbsp;nx</em>, int<em>&nbsp;ny</em>, double<em>&nbsp;*sx</em>, double<em>&nbsp;*sy</em>, double<em>&nbsp;*est</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ftr_plan_reconstructor" title="Permalink to this definition">¶</a></dt>
<dd><p>This function allocates a inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> struct with the correct members.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>nx</strong> (<em>int</em>) &#8211; The number of points in the x direction.</li>
<li><strong>ny</strong> (<em>int</em>) &#8211; The number of points in the y direction.</li>
<li><strong>sx</strong> (<em>double</em>) &#8211; A pointer to the x slope data.</li>
<li><strong>sy</strong> (<em>double</em>) &#8211; A pointer to the y slope data.</li>
<li><strong>est</strong> (<em>double</em>) &#8211; A pointer to the estimated phase output data.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> with allocated data arrays.</p>
</td>
</tr>
</tbody>
</table>
<p>This function also serves to initialize the FFTW plans which will be used to perform the reconstruction.</p>
</dd></dl>

<dl class="function">
<dt id="c.ftr_set_filter">
void <code class="descname">ftr_set_filter</code><span class="sig-paren">(</span><a class="reference internal" href="#c.ftr_plan" title="ftr_plan">ftr_plan</a><em>&nbsp;recon</em>, fftw_complex<em>&nbsp;*gx</em>, fftw_complex<em>&nbsp;*gy</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ftr_set_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>This function sets the filter in the inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> struct to point to the provided filter arrays. It also computes the filter denominator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recon</strong> (<a class="reference internal" href="#c.ftr_plan" title="ftr_plan"><em>ftr_plan</em></a>) &#8211; The inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> struct for this reconstructor.</li>
<li><strong>gx</strong> (<em>complex</em>) &#8211; The x spatial filter.</li>
<li><strong>gy</strong> (<em>complex</em>) &#8211; The y spatial filter.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Changing the values in <code class="docutils literal"><span class="pre">gx</span></code> and <code class="docutils literal"><span class="pre">gy</span></code> after calling this function will leave the incorrect denominator stored in the inttype:<code class="xref py py-obj docutils literal"><span class="pre">reconstructor</span></code> struct.</p>
</dd></dl>

<dl class="function">
<dt id="c.ftr_destroy">
void <code class="descname">ftr_destroy</code><span class="sig-paren">(</span><a class="reference internal" href="#c.ftr_plan" title="ftr_plan">ftr_plan</a><em>&nbsp;recon</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ftr_destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy an FTR plan, deallocating memory as necessary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recon</strong> (<a class="reference internal" href="#c.ftr_plan" title="ftr_plan"><em>ftr_plan</em></a>) &#8211; The inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> to deallocate.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="reconstruction-with-and-without-callbacks">
<h3>Reconstruction, with and without callbacks<a class="headerlink" href="#reconstruction-with-and-without-callbacks" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.ftr_reconstruct">
void <code class="descname">ftr_reconstruct</code><span class="sig-paren">(</span><a class="reference internal" href="#c.ftr_plan" title="ftr_plan">ftr_plan</a><em>&nbsp;recon</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ftr_reconstruct" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the reconstruction. Reconstruction results are stored in the data assigned to <code class="docutils literal"><span class="pre">est</span></code> with intfunc:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan_reconstructor</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recon</strong> (<a class="reference internal" href="#c.ftr_plan" title="ftr_plan"><em>ftr_plan</em></a>) &#8211; The inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> struct for this reconstructor.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="type">
<dt id="c.ftr_estimate_callback">
<code class="descname">ftr_estimate_callback</code><a class="headerlink" href="#c.ftr_estimate_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the callback type for functions which can serve as callbacks in intfunc:<code class="xref py py-obj docutils literal"><span class="pre">ftr_reconstruct_with_callback</span></code>. The callback signature must match <code class="docutils literal"><span class="pre">void</span> <span class="pre">(*ftr_estimate_callback)(void</span> <span class="pre">*</span> <span class="pre">data,</span> <span class="pre">fftw_complex</span> <span class="pre">*</span> <span class="pre">est_ft)</span></code>. The inclusion of the <code class="docutils literal"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">data</span></code> pointer allows for an arbitrary structure of user data to be passed in to the Fourier Transform Reconstructor.</p>
</dd></dl>

<dl class="function">
<dt id="c.ftr_reconstruct_with_callback">
void <code class="descname">ftr_reconstruct_with_callback</code><span class="sig-paren">(</span><a class="reference internal" href="#c.ftr_plan" title="ftr_plan">ftr_plan</a><em>&nbsp;recon</em>, <a class="reference internal" href="#c.ftr_estimate_callback" title="ftr_estimate_callback">ftr_estimate_callback</a><em>&nbsp;callback</em>, void *<em>&nbsp;data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ftr_reconstruct_with_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the reconstruction, and use a callback to adjust the fourier transform of the estimate. See inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_estimate_callback</span></code> for a descritpion of the callback function required to apply additional filters to the fourier transform of the estimate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recon</strong> (<a class="reference internal" href="#c.ftr_plan" title="ftr_plan"><em>ftr_plan</em></a>) &#8211; The inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> for this reconstructor.</li>
<li><strong>callback</strong> (<a class="reference internal" href="#c.ftr_estimate_callback" title="ftr_estimate_callback"><em>ftr_estimate_callback</em></a>) &#8211; A callback function to be applied to the fourier transform of the phase estimate.</li>
<li><strong>data</strong> (<em>void*</em>) &#8211; A pointer to data required by <code class="xref py py-obj docutils literal"><span class="pre">callback</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="individual-reconstruction-steps">
<h3>Individual reconstruction steps<a class="headerlink" href="#individual-reconstruction-steps" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.ftr_forward_transform">
void <code class="descname">ftr_forward_transform</code><span class="sig-paren">(</span><a class="reference internal" href="#c.ftr_plan" title="ftr_plan">ftr_plan</a><em>&nbsp;recon</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ftr_forward_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform only the forward FFTs to transform the slopes into the Fourier domain.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recon</strong> (<a class="reference internal" href="#c.ftr_plan" title="ftr_plan"><em>ftr_plan</em></a>) &#8211; The inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> to use for the forward transform.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="c.ftr_apply_filter">
void <code class="descname">ftr_apply_filter</code><span class="sig-paren">(</span><a class="reference internal" href="#c.ftr_plan" title="ftr_plan">ftr_plan</a><em>&nbsp;recon</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ftr_apply_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Only apply the filter to the transformed slopes, to estimate the phase.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recon</strong> (<a class="reference internal" href="#c.ftr_plan" title="ftr_plan"><em>ftr_plan</em></a>) &#8211; The inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> to use to apply the filter.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="c.ftr_backward_transform">
void <code class="descname">ftr_backward_transform</code><span class="sig-paren">(</span><a class="reference internal" href="#c.ftr_plan" title="ftr_plan">ftr_plan</a><em>&nbsp;recon</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ftr_backward_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the backward FFT to transform the Fourier mode estimate of the phase into a real phase.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recon</strong> (<a class="reference internal" href="#c.ftr_plan" title="ftr_plan"><em>ftr_plan</em></a>) &#8211; The inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> to use for the backward transform.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="c.ftr_apply_callback">
void <code class="descname">ftr_apply_callback</code><span class="sig-paren">(</span><a class="reference internal" href="#c.ftr_plan" title="ftr_plan">ftr_plan</a><em>&nbsp;recon</em>, <a class="reference internal" href="#c.ftr_estimate_callback" title="ftr_estimate_callback">ftr_estimate_callback</a><em>&nbsp;callback</em>, void *<em>&nbsp;data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ftr_apply_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a callback function to the estimated phase in the Fourier domain.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recon</strong> (<a class="reference internal" href="#c.ftr_plan" title="ftr_plan"><em>ftr_plan</em></a>) &#8211; The inttype:<code class="xref py py-obj docutils literal"><span class="pre">ftr_plan</span></code> for this reconstructor.</li>
<li><strong>callback</strong> (<a class="reference internal" href="#c.ftr_estimate_callback" title="ftr_estimate_callback"><em>ftr_estimate_callback</em></a>) &#8211; A callback function to be applied to the fourier transform of the phase estimate.</li>
<li><strong>data</strong> (<em>void*</em>) &#8211; A pointer to data required by <code class="xref py py-obj docutils literal"><span class="pre">callback</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="fftw-halfcomplex-format-utilties">
<h2>FFTW Halfcomplex Format Utilties<a class="headerlink" href="#fftw-halfcomplex-format-utilties" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.ftr_map_half_complex">
void <code class="descname">ftr_map_half_complex</code><span class="sig-paren">(</span>int<em>&nbsp;ny</em>, int<em>&nbsp;nx</em>, int *<em>&nbsp;map</em>, int *<em>&nbsp;imap</em><span class="sig-paren">)</span><a class="headerlink" href="#c.ftr_map_half_complex" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the mapping between half-complex transforms and the fully-expanded transform, for flattened arrays.</p>
<p>In FFTW, the complex side of a real-to-complex transform (or vice-versa) does not include all the data points, and rather elimintates some of the data points which can be reconstructed based on the Hermitian symmetry of the output. See the FFTW documentation on <a class="reference external" href="http://www.fftw.org/doc/The-Halfcomplex_002dformat-DFT.html#The-Halfcomplex_002dformat-DFT">The Halfcomplex-format DFT</a> for more details on the exact specifics of this format. This function simply provides the mapping between a Halfcomplex array and a full array, as a pair of integer pointers.</p>
<p>Using the pointer <code class="docutils literal"><span class="pre">map</span></code>, you can map from a Halfcomplex array to a full array in 2D:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="kt">int</span> <span class="o">*</span><span class="n">map</span><span class="p">,</span> <span class="o">*</span><span class="n">imap</span><span class="p">;</span>
<span class="kt">double</span> <span class="o">*</span><span class="n">full_array</span><span class="p">,</span> <span class="o">*</span><span class="n">half_array</span><span class="p">;</span>
<span class="n">full_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">half_array</span><span class="p">[</span><span class="n">map</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
<span class="n">half_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">full_array</span><span class="p">[</span><span class="n">imap</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
</pre></div>
</div>
<p>The pointers to <a class="reference external" href="http://docs.python.org/library/functions.html#map" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">map</span></code></a> and <code class="xref py py-obj docutils literal"><span class="pre">imap</span></code> should be allocated before calling this function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ny</strong> (<em>int</em>) &#8211; Number of y grid points.</li>
<li><strong>nx</strong> (<em>int</em>) &#8211; Number of x grid points.</li>
<li><strong>map</strong> (<em>int*</em>) &#8211; Mapping of full indices to halfcomplex indicies.</li>
<li><strong>imap</strong> (<em>int*</em>) &#8211; Mapping of halfcomplex indicies to full indices.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Fourier Transform Reconstructor in libFTR</a><ul>
<li><a class="reference internal" href="#using-the-fourier-transform-reconstructor">Using the Fourier Transform Reconstructor</a></li>
<li><a class="reference internal" href="#fourier-transform-reconstructor-api">Fourier Transform Reconstructor API</a><ul>
<li><a class="reference internal" href="#creating-and-destroying-plans">Creating and destroying plans</a></li>
<li><a class="reference internal" href="#reconstruction-with-and-without-callbacks">Reconstruction, with and without callbacks</a></li>
<li><a class="reference internal" href="#individual-reconstruction-steps">Individual reconstruction steps</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fftw-halfcomplex-format-utilties">FFTW Halfcomplex Format Utilties</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/libFTR/ftr.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2015, Alex Rudy.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1. &nbsp;
    Last built 03 Nov 2015. <br/>
  </p>
</footer>
  </body>
</html>